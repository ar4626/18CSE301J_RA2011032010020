<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Double Histogram</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
  </head>
  <body>
    <svg width="500" height="300"></svg>
    <script>
      // Set up the SVG and margin variables
      const svg = d3.select("svg");
      const width = +svg.attr("width");
      const height = +svg.attr("height");
      const margin = { top: 20, right: 20, bottom: 30, left: 40 };
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;

      // Set up the x and y scales
      const x = d3.scaleBand()
        .range([0, innerWidth])
        .padding(0.1);

      const y = d3.scaleLinear()
        .range([innerHeight, 0]);

      // Set up the axes
      const xAxis = d3.axisBottom(x);

      const yAxis = d3.axisLeft(y)
        .ticks(5);

      // Add the axis labels to the chart
      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0)
        .attr("x", 0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Number");

      svg.append("text")
        .attr("y", height - margin.bottom)
        .attr("x", width / 2)
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Year");

      // Load the data from the CSV file
      d3.csv("D3\data.csv", function(error, data) {
        if (error) throw error;

        // Format the data
        data.forEach(function(d) {
          d.value = +d.value;
        });

        // Set the domain of the x and y scales
        x.domain(data.map(function(d) { return d.year; }));
        y.domain([0, d3.max(data, function(d) { return d.value; })]);

        // Add the bars to the chart
        svg.append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
          .selectAll("rect")
          .data(data)
          .enter()
          .append("rect")
          .attr("x", function(d) { return x(d.year); })
          .attr("y", function(d) { return y(d.value); })
          .attr("width", x.bandwidth())
          .attr("height", function(d) { return innerHeight - y(d.value); })
          .attr("fill", "steelblue");
        
        // Add the x-axis to the chart
        svg.append("g")
          .attr("transform", "translate(" + margin.left + "," + (innerHeight + margin.top) + ")")
          .call(xAxis);

        // Add the y-axis to the chart
        svg.append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
          .call(yAxis);
      });
    </script>
  </body>
</html>
